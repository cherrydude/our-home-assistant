# TTS via local REST service (espeak-ng)
rest_command:
  tts_generate:
    url: "http://127.0.0.1:5002/tts"
    method: "post"
    content_type: "application/json"
    payload: '{"text":"{{ text }}","lang":"de","filename":"{{ filename }}"}'

# Beispiel script, das zuerst Datei erzeugt und dann auf media_player abspielt
script:
  speak_local:
    sequence:
      - service: rest_command.tts_generate
        data:
          text: "{{ text }}"
          filename: "{{ filename | default('live') }}"
      - delay: "00:00:01"  # kurz warten, bis Datei geschrieben ist
      - service: media_player.play_media
        data:
          entity_id: media_player.wohnzimmer_speaker
          media_content_id: "http://127.0.0.1:8123/local/tts/{{ filename | default('live') }}.wav"
          media_content_type: "music"
